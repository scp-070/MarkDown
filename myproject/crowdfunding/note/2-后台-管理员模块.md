# ä¸€ã€ç®¡ç†å‘˜ç™»å½•

## ç›®æ ‡

è¯†åˆ«æ“ä½œç³»ç»Ÿçš„äººçš„èº«ä»½ï¼Œæ§åˆ¶å…¶è¡Œä¸ºã€‚

## æ€è·¯

![image-20220514161023640](https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220514161023640.png)



## ä»£ç 

### 1ï¼‰ã€åˆ›å»ºå·¥å…·æ–¹æ³•æ‰§è¡ŒMD5 åŠ å¯†

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220514171610094.png" alt="image-20220514171610094" style="zoom:67%;" />

```java
package com.x.crowd.util;

import com.x.crowd.constant.CrowdConstant;
import javax.servlet.http.HttpServletRequest;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Locale;

/**
 * é€šç”¨å·¥å…·ç±»
 */
public class CrowdUtil {

    /**
     * å¯¹æ˜æ–‡å­—ç¬¦ä¸²è¿›è¡ŒMD5åŠ å¯†
     */
    public static String md5(String source) {
        // åˆ¤æ–­sourceæ˜¯å¦æœ‰æ•ˆ
        if (source == null || source.length() == 0) {
            throw new RuntimeException(CrowdConstant.MESSAGE_STRING_INVALIDATE);
        }

        try {
            // è·å–MessageDigestå¯¹è±¡ï¼ˆjdkæä¾›çš„ï¼‰
            String algorithm = "md5";// ä¸å…è®¸ä½¿ç”¨â€œé­”æ³•å€¼â€, //åç©ºä¸€æ ¼ï¼ˆè§„èŒƒï¼‰
            MessageDigest messageDigest = MessageDigest.getInstance(algorithm);

            // è·å–æ˜æ–‡å­—ç¬¦ä¸²å¯¹åº”çš„å­—èŠ‚æ•°ç»„
            byte[] input = source.getBytes();

            // æ‰§è¡ŒåŠ å¯†
            byte[] output = messageDigest.digest(input);

            // åˆ›å»ºBigIntegerå¯¹è±¡
            int signum = 1;
            BigInteger bigInteger = new BigInteger(signum, output);

            // æŒ‰ç…§16è¿›åˆ¶å°†bigIntegerçš„å€¼è½¬ä¸ºå­—ç¬¦ä¸²
            int radix = 16;
            String encoded = bigInteger.toString(radix).toUpperCase(Locale.ROOT);

            return encoded;
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException(e);
        }
    }
}
```

### 2ï¼‰ã€åˆ›å»ºç™»å½•å¤±è´¥å¼‚å¸¸

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220514171828760.png" alt="image-20220514171828760" style="zoom:67%;" />

### ==å¿«æ·é”®==

> ideaè®¾ç½®å¿«æ·é”®ç”Ÿæˆåºåˆ—å·
>
> è¿›å…¥settingâ†’ inspectionsâ†’serialization issues â†’ serializable class without â€˜serialVersionUIDâ€™

### 3ï¼‰ã€åœ¨å¼‚å¸¸å¤„ç†å™¨ç±»ä¸­å¢åŠ ç™»å½•å¤±è´¥å¼‚å¸¸çš„å¤„ç†

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220514172329351.png" alt="image-20220514172329351" style="zoom:60%;" />

```java
// è§¦å‘ç™»å½•å¤±è´¥å¼‚å¸¸ï¼Œåˆ™ç»§ç»­è¿”å›ç™»é™†é¡µé¢
@ExceptionHandler(value = LoginFailedException.class)
public ModelAndView resolverLoginFailedException(
        LoginFailedException exception, HttpServletRequest request,
        HttpServletResponse response) throws IOException {
    String viewName = "admin-login";
    return commonCode(exception,request,response,viewName);
}
```

### 4ï¼‰ã€åœ¨ç™»å½•é¡µé¢æ˜¾ç¤ºå¼‚å¸¸ä¿¡æ¯

**admin-login.jsp:**

```jsp
<h2 class="form-signin-heading">
    <i class="glyphicon glyphicon-log-in"></i> 
    ç”¨æˆ·ç™»å½•</h2>
<p>${requestScope.exception.message}</p>
```

### 5ï¼‰ã€Controlleræ–¹æ³•

ï¼ˆControllerå±‚è°ƒç”¨Serviceå±‚ï¼‰

```java
public class AdminController {
    
 	private AdminService adminService;
    
    @RequestMapping("do/login.html")
    public String doLogin(
            @RequestParam("loginAcct") String loginAcct,
            @RequestParam("userPswd") String userPswd,
            HttpSession session
    ) {
        // è°ƒç”¨Service æ–¹æ³•æ‰§è¡Œç™»å½•æ£€æŸ¥
        // è¿™ä¸ªæ–¹æ³•å¦‚æœèƒ½å¤Ÿè¿”å›admin å¯¹è±¡è¯´æ˜ç™»å½•æˆåŠŸï¼Œå¦‚æœè´¦å·ã€å¯†ç ä¸æ­£ç¡®åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸
        Admin admin = adminService.getAdminByLoginAcct(loginAcct, userPswd);
        // å°†ç™»å½•æˆåŠŸè¿”å›çš„admin å¯¹è±¡å­˜å…¥Session åŸŸ
        session.setAttribute(CrowdConstant.ATTR_NAME_LOGIN_ADMIN, admin);
        return "admin-main"; //è¯·æ±‚è½¬å‘ï¼ˆyé‡å®šå‘é˜²æ­¢é‡å¤æäº¤è¡¨å•ï¼Œå¢åŠ ä¸å¿…è¦çš„æ•°æ®åº“è®¿é—®ï¼‰
    }
    }
```

> å‰å¾€åå°ä¸»é¡µé¢çš„æ–¹å¼è°ƒæ•´ï¼š
>
> ä¸ºäº†é¿å…è·³è½¬åˆ°åå°ä¸»é¡µé¢å†åˆ·æ–°æµè§ˆå™¨å¯¼è‡´é‡å¤æäº¤ç™»å½•è¡¨å•ï¼Œé‡å®šå‘åˆ°ç›®æ ‡é¡µé¢ã€‚
> æ‰€ä»¥handler æ–¹æ³•éœ€è¦åšç›¸åº”ä¿®æ”¹
>
> ```java
> return "redirect:/admin/to/main/page.html";
> ```
>
> ç»™ç›®æ ‡åœ°å€é…ç½®view-controllerï¼ˆspring-web-mvc.xmlï¼‰
>
> ```xml
> <!--å»ç™»å½•æˆåŠŸçš„ä¸»é¡µé¢-->
> <mvc:view-controller path="/admin/main/page.html" view-name="admin-main"/>
> ```

â€‹	é‡å®šå‘å»çš„é¡µé¢ï¼Œä½¿é€šè¿‡pathæŒ‡å®šçš„è·¯å¾„ï¼Œè®¿é—®ç™»å½•é¡µé¢ï¼ˆå› ä¸ºåªéœ€è¦å•çº¯çš„è®¿é—®è€Œä¸éœ€è¦é™„å¸¦æ•°æ®ç­‰æ“ä½œï¼Œå› æ­¤ä½¿ç”¨æ­¤æ–¹æ³•ç›¸æ¯”handleræ–¹æ³•è½¬å‘æ›´åŠ æ–¹ä¾¿ï¼‰,å› ä¸ºæ•°æ®æ”¾åœ¨**session**ä¸­ï¼Œå› æ­¤ç›´æ¥é€šè¿‡mvc:view-controlleræŒ‡å®šè¯¥é¡µé¢	



â€‹	è‹¥æ­¤æ—¶æ¯”å¯¹åï¼Œè´¦å·å¯†ç å‡ç¬¦åˆæ•°æ®åº“æ•°æ®ï¼Œåˆ™è¿›å…¥ç™»å½•åçš„ä¸»é¡µé¢==**/WEB-INF/admin-main.jsp**==ï¼ˆå‰ç«¯ä»£ç å¤§å¤šé‡å¤ï¼Œä¸åœ¨è¿™è¾¹å¤åˆ¶å‡ºæ¥ï¼‰

â€‹	è¿™é‡Œä¸»è¦æœ‰ä¸€å¥å‰ç«¯ä»£ç ï¼Œç”¨æ¥æ˜¾ç¤ºå·²ç»ç™»å½•çš„è´¦å·çš„æ˜µç§°ï¼ˆä»Sessionä¸­å–å‡ºï¼‰

<div class="btn-group">
    <button type="button" class="btn btn-default btn-success dropdown-toggle" data-toggle="dropdown">
        <i class="glyphicon glyphicon-user"></i> ${sessionScope.loginAdmin.userName} <span class="caret"></span>
    </button>
    ...
</div>



### 6ï¼‰ã€==<font color = red>serviceæ–¹æ³•</font>==

```java
@Service
public class AdminServiceImpl implements AdminService {
    @Autowired
    private AdminMapper adminMapper;

    {å®ç°æ¥å£çš„æ–¹æ³•}

    //ç™»å½•çš„é€»è¾‘
    @Override
    public Admin getAdminByLoginAcct(String loginAcct, String userPswd) {
        // 1.æ ¹æ®ç™»å½•è´¦å·æŸ¥è¯¢Adminå¯¹è±¡
        // â‘ åˆ›å»ºAdminExampleå¯¹è±¡
        AdminExample adminExample = new AdminExample();

        // â‘¡åˆ›å»ºCriteriaï¼ˆä¸€ç§æŸ¥è¯¢æ–¹å¼ï¼‰å¯¹è±¡
        AdminExample.Criteria criteria = adminExample.createCriteria();

        // â‘¢åœ¨Criteriaå¯¹è±¡ä¸­å°è£…æŸ¥è¯¢æ¡ä»¶
        criteria.andLoginAcctEqualTo(loginAcct);

        // â‘£è°ƒç”¨AdminMapperçš„æ–¹æ³•æ‰§è¡ŒæŸ¥è¯¢
        List<Admin> list = adminMapper.selectByExample(adminExample);


        // 2.åˆ¤æ–­Adminå¯¹è±¡æ˜¯å¦ä¸ºnull
        if (list == null || list.size() == 0) {
            throw new LoginFailedException(CrowdConstant.MESSAGE_LOGIN_FAILED);
        }

        if (list.size() > 1) {
            throw new RuntimeException(CrowdConstant.MESSAGE_SYSTEM_ERROR_LOGIN_NOT_UNIQUE);
        }
        Admin admin = list.get(0);

        // 3.å¦‚æœä¸ºnullæŠ›å‡ºå¼‚å¸¸
        if (admin == null) {
            throw new LoginFailedException(CrowdConstant.MESSAGE_LOGIN_FAILED);
        }

        // 4.å¦‚æœAdminå¯¹è±¡ä¸ä¸ºnullåˆ™å°†[æ•°æ®åº“å¯†ç ]ä»Adminå¯¹è±¡ä¸­å–å‡º
        String userPswdDB = admin.getUserPswd();

        // 5.å°†[è¡¨å•æäº¤çš„æ˜æ–‡å¯†ç ]è¿›è¡ŒåŠ å¯†
        String userPswdForm = CrowdUtil.md5(userPswd);

        // 6.å¯¹å¯†ç è¿›è¡Œæ¯”è¾ƒ
        if (!Objects.equals(userPswdDB, userPswdForm)) {
            // 7.å¦‚æœæ¯”è¾ƒç»“æ„ä¸ä¸€è‡´æŠ›å‡ºå¼‚å¸¸
            throw new LoginFailedException(CrowdConstant.MESSAGE_LOGIN_FAILED);
        }

        // 8.å¦‚æœä¸€è‡´åˆ™è¿”å›Adminå¯¹è±¡
        return admin;
    }
}
```

> **ç¬¬6ç‚¹**ï¼šåŸæœ¬çš„å†™æ³•æ˜¯"sss".equals(userPswdDB,userPswdForm) ï¼Œå¸¸é‡æ”¾å‰é¢ï¼Œé˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä½†æ˜¯ç°åœ¨éƒ½æ˜¯å˜é‡ã€‚å› æ­¤ç”¨å·¥å…·æ–¹æ³•==Objects.equals==ï¼ˆï¼‰ï¼Œæ¯”è¾ƒçš„æ˜¯å †å†…å­˜é‡Œçš„åœ°å€å€¼ï¼Œçœ‹æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚

åœ¨mvcé…ç½®æ–‡ä»¶ä¸­é€šè¿‡view-controllerï¼Œ

```xml
<mvc:view-controller path="/admin/main/page.html" view-name="admin-main"/>
```



### 7ï¼‰ã€é€€å‡ºç™»å½•

1. æ‰¾åˆ°é€€å‡ºé“¾æ¥

2. åœ¨view-controlleré‡Œé¢é…ç½®è¯¥é“¾æ¥

3. åœ¨controlleré‡Œé¢åˆ›å»ºæ–¹æ³•

   ```java
    // é€€å‡ºç™»å½•
       @RequestMapping("admin/do/logout.html")
       public String doLogout(HttpSession session){
           // å¼ºåˆ¶sessionå¤±æ•ˆï¼ˆå¤±æ•ˆå³å–æ¶ˆç™»å½•çŠ¶æ€ï¼‰
           session.invalidate();
   
           return "redirect:/admin/login/page.html";
       }
   
   ```



### 8ï¼‰ã€æŠ½å–jspå…¬å…±éƒ¨åˆ†æ¨¡æ¿

â€‹	JSPé¡µé¢ä¸­ï¼Œå¯¹å…¬å…±çš„é¡µé¢ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬é¡µé¢ä¸­ä¿å­˜ï¼Œåœ¨éœ€è¦è°ƒç”¨è¿™äº›å…¬å…±é¡µé¢çš„æ—¶å€™é€šè¿‡`<%@include file="..."%>`å¼•å…¥è¿™äº›é¡µé¢ã€‚

â€‹	æ³¨æ„ï¼šå¦‚æœåœ¨å¼•å…¥æ—¶ï¼Œå‘ç°å¼•å…¥çš„åœ°æ–¹åŸæœ¬çš„**ä¸­æ–‡æ˜¾ç¤ºä¹±ç **ï¼Œå¯ä»¥é€šè¿‡ç»™è¿™äº›å…¬å…±çš„é¡µé¢ä»£ç åŠ ä¸Šä¸€å¥`<%@page pageEncoding="UTF-8"%>`

æŠ½å–å®Œååœ¨é¡µé¢åŸæœ¬çš„ä½ç½®æ›¿æ¢å°±è¡Œã€‚



### 9ï¼‰ã€==ç™»å½•çŠ¶æ€æ£€æŸ¥==

**ç›®æ ‡ï¼š** å°†éƒ¨åˆ†èµ„æºä¿æŠ¤èµ·æ¥ï¼Œè®©æ²¡æœ‰ç™»å½•çš„è¯·æ±‚ä¸èƒ½è®¿é—®ã€‚

**æ€è·¯**ï¼š<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220517232908188.png" alt="image-20220517232908188" style="zoom:67%;" />

ä¸»è¦æ˜¯é€šè¿‡ä¸€ä¸ª**å¼‚å¸¸é…åˆä¸€ä¸ªæ‹¦æˆªå™¨æ¥å®ç°**ã€‚

**å®ç°ï¼š**

â€‹	â‘ é¦–å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸AccessForbiddenExceptionï¼Œåœ¨ç”¨æˆ·æœªç™»å½•æ—¶è®¿é—®å—ä¿æŠ¤èµ„æºæ—¶æŠ›å‡ºï¼š

```java
package com.x.crowd.exception;

public class AccessForbiddenException extends RuntimeException{
    public AccessForbiddenException() {
        super();
    }

    public AccessForbiddenException(String message) {
        super(message);
    }

    public AccessForbiddenException(String message, Throwable cause) {
        super(message, cause);
    }

    public AccessForbiddenException(Throwable cause) {
        super(cause);
    }

    protected AccessForbiddenException(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace) {
        super(message, cause, enableSuppression, writableStackTrace);
    }
}

```

â‘¡ç„¶ååˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªé™¤äº†ç™»å½•é¡µé¢ã€ç™»å½•è¯·æ±‚ã€ç™»å‡ºæ“ä½œçš„å…¶ä»–è¯·æ±‚ï¼Œåªæœ‰èƒ½ä»sessionåŸŸä¸­å¾—åˆ°adminå¯¹è±¡æ—¶ï¼Œæ‰å¯ä»¥æ”¾è¡Œï¼š

```java
// æ‹¦æˆªå™¨ï¼Œç”¨æ¥åœ¨æœªç™»å½•æ—¶è®¿é—®å—ä¿æŠ¤é¡µé¢æ—¶è¿›è¡Œæ‹¦æˆªå¹¶æŠ›å‡ºAccessForbiddenException
public class LoginInterceptor extends HandlerInterceptorAdapter {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        // é€šè¿‡requestè·å¾—sessionå¯¹è±¡
        HttpSession session = request.getSession();

        // ä»sessionåŸŸä¸­å–å‡ºAdminå¯¹è±¡
        Admin admin = (Admin) session.getAttribute(CrowdConstant.LOGIN_ADMIN_NAME);

        // åˆ¤æ–­adminå¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºè¡¨ç¤ºæœªç™»å½•ï¼ŒæŠ›å‡ºå¼‚å¸¸
        if (admin == null){
            throw new AccessForbiddenException(CrowdConstant.MESSAGE_ACCESS_FORBIDDEN);
        }

        // adminå¯¹è±¡ä¸ä¸ºç©ºï¼Œè¡¨ç¤ºå·²ç™»å½•ï¼Œæ”¾è¡Œ
        return true;
    }
}
```

æ­¤å¤„çš„ **adminå¯¹è±¡ **æ˜¯åœ¨ç™»å½•æ§åˆ¶å™¨ä¸­å°†adminå¯¹è±¡æ³¨å…¥ **session**é‡Œé¢äº†ï¼ˆç™»å½•ç•Œé¢ä¸æ‹¦æˆªï¼‰

![image-20220526133736311](https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220526133736311.png)	

â‘¢åœ¨SpringMVCçš„å®¹å™¨ä¸­æ³¨å†Œæ‹¦æˆªå™¨ï¼š

```xml
  <!--åœ¨mvcå®¹å™¨ä¸­æ³¨å†Œæ‹¦æˆªå™¨ ï¼š åœ¨ä½¿ç”¨SpringSecurityåï¼Œå°±è¦æ³¨é‡Šæ‰åŸæ¥çš„è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨äº†-->
    <mvc:interceptors>
        <mvc:interceptor>
            <!-- mapping è¡¨ç¤ºæ‹¦æˆªçš„è·¯å¾„ -->
              <!--/*  è¡¨ç¤ºä¸€å±‚è·¯å¾„-->
            <!--/** è¡¨ç¤ºå¤šå±‚è·¯å¾„-->
            <mvc:mapping path="/**"/>
            <!-- exclude-mappingè¡¨ç¤ºä¾‹å¤–ï¼ˆå³ä¸ä¼šè¢«æ‹¦æˆªå™¨æ‹¦æˆªï¼‰ -->
            <mvc:exclude-mapping path="/admin/login/page.html"/>
            <mvc:exclude-mapping path="/admin/login/logout.html"/>
            <!--é€€å‡ºç™»å½•æ²¡å¿…è¦åšç™»å½•æ£€æŸ¥-->
            <mvc:exclude-mapping path="/admin/login/doLogin.html"/>
            <bean class="com.x.crowd.mvc.interceptor.LoginInterceptor"/>
        </mvc:interceptor>
    </mvc:interceptors>
```

â€‹	â‘£å®Œå–„å¼‚å¸¸æ˜ å°„ï¼Œåœ¨æœªç™»å½•æ—¶ï¼Œè§¦å‘è¯¥å¼‚å¸¸ï¼Œåº”è¯¥è‡ªåŠ¨è·³è½¬åˆ°ç™»é™†é¡µé¢ï¼š

**spring-web-mvc.xml:**

```xml
 <!--åŸºäºXMLçš„å¼‚å¸¸æ˜ å°„-->
    <bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"
          id="simpleMappingExceptionResolver">
    <property name="exceptionMappings">
   	 <props>
     <!--keyå±æ€§æŒ‡å®šå¼‚å¸¸å…¨ç±»å-->
     <!--å€¼è¦æ‹¼å‰åç¼€å¾—åˆ°å…·ä½“è·¯å¾„-->
         <prop key="java.lang.Exception">system-error</prop>
          <!--é€šè¿‡xmlé…ç½®AccessForbiddenExceptionçš„å¼‚å¸¸æ˜ å°„ -->
         <prop key="com.x.crowd.exception.AccessForbiddenException">admin-login</prop>
         </props>
        </property>
    </bean>
```

â€‹	**æ³¨æ„**ï¼šç»æµ‹è¯•ï¼Œæ­¤å¤„ä¸èƒ½ç›´æ¥ä½¿ç”¨åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†ã€‚ç›´æ¥ä½¿ç”¨@ExceptionHandleræ³¨è§£æ•æ‰å¼‚å¸¸åœ¨è®¿é—®/admin/main/page.htmlæ—¶ä¸ä¼šè¿›å…¥è¯¥æ–¹æ³•
â€‹        åŸå› æ˜¯ï¼šä¸Šé¢çš„/admin/main/page.htmlè§†å›¾æ˜¯åœ¨mvcçš„é…ç½®æ–‡ä»¶ä¸­ç”¨**mvc:view-controller**ä¿®é¥°çš„ï¼Œè¿™ç§é¡µé¢ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨
â€‹        è€Œä¸æ˜¯ä½¿ç”¨è‡ªå®šä¹‰å¤„ç†å™¨ã€‚

â€‹	==å› æ­¤è¿™é‡Œå¿…é¡»é€šè¿‡mvcé…ç½®æ–‡ä»¶æ¥é…ç½®å¼‚å¸¸æ˜ å°„ï¼›==

â€‹	==æˆ–ä¸ä½¿ç”¨view-controllerä¿®é¥°/admin/main/page.htmlï¼Œè€Œæ˜¯æŠŠè¯¥é¡µé¢çš„è·³è½¬ æ”¾åœ¨Controllerä¸­ã€‚==



# äºŒã€ç®¡ç†å‘˜ç»´æŠ¤

## ç›®æ ‡

å¯¹ç®¡ç†å‘˜è¿›è¡Œç»´æŠ¤ï¼šä¸»è¦ç›®çš„å°±æ˜¯åœ¨å‰ç«¯é¡µé¢å‹å¥½åœ°æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„ç®¡ç†å‘˜æ•°æ®ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å¯¹å…¶ä¸­æ•°æ®è¿›è¡Œ**å¢åˆ æ”¹æŸ¥**æ“ä½œã€‚

**å…·ä½“ï¼š**

1. **åˆ†é¡µæ˜¾ç¤º**ç®¡ç†å‘˜çš„ä¿¡æ¯
2. å®ç°**æ ¹æ®å…³é”®å­—æŸ¥è¯¢**å¯¹åº”ä¿¡æ¯
3. å®ç°ä»åˆ—è¡¨åˆ é™¤æŒ‡å®šç®¡ç†å‘˜
4. å®ç°æ–°å¢ç®¡ç†å‘˜
5. å®ç°ä¿®æ”¹ç®¡ç†å‘˜ä¿¡æ¯

## æ€è·¯

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220521235503175.png" alt="image-20220521235503175" style="zoom:150%;" />

æ³¨æ„ç‚¹ï¼š

1. AdminHandler.getPage(String keyword,Integer pageNum,Integer pageSize)è¦è€ƒè™‘è¯·æ±‚å‚æ•°æœªæä¾›çš„æƒ…å†µï¼Œå³å…¼é¡¾å…³é”®è¯æŸ¥è¯¢ï¼Œè®©åç«¯ä»£ç ä¸ç®¡æœ‰æ²¡æœ‰æŸ¥è¯¢æ¡ä»¶éƒ½èƒ½å¤Ÿä»¥åˆ†é¡µå½¢å¼æ˜¾ç¤ºæ•°æ®ã€‚
2. **è®© SQLè¯­å¥é’ˆå¯¹ keywordæ—¶æœ‰æ—¶æ— çš„æƒ…å†µè¿›è¡Œé€‚é…**
   ä½¿ç”¨SQLä¸­åšå­—ç¬¦ä¸²è¿æ¥çš„å‡½æ•°ï¼š CONCAT("%",#{keyword},"%")
   keywordæœ‰å€¼ï¼šâ€œ like %tmo%â€œ
   keywordæ— å€¼ï¼šâ€œ like %%â€

## ä»£ç 

### 1ï¼‰ã€==åˆ†é¡µæ˜¾ç¤ºä¿¡æ¯==

#### â‘ å¼•å…¥ä¾èµ–	

â€‹	ä¸ºäº†å®ç°æ–¹ä¾¿ï¼Œä½¿ç”¨äº†åŸºäº**jQuery**çš„**Pagination**æ’ä»¶ï¼Œå®ç°**æ˜¾ç¤ºé¡µç å¯¼èˆªæ¡**

**ï¼ˆåœ¨å‰ç«¯é¡µé¢ä¸­å¼•å…¥æ—¶è¦åœ¨jqueryåé¢ï¼‰**

â€‹	æœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„Paginationç‰ˆæœ¬æ˜¯1.2ï¼›è¿™é‡Œå°†å¯¹åº”çš„jsæ–‡ä»¶æ”¾åœ¨jqueryæ–‡ä»¶å¤¹ä¸‹ï¼Œcssæ–‡ä»¶æ”¾åœ¨cssæ–‡ä»¶å¤¹ä¸‹ï¼š

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220518145500088.png" alt="image-20220518145500088" style="zoom:50%;" />

â€‹	å¼•å…¥PageHelperï¼Œç”¨äºåœ¨åç«¯è¿›è¡Œåˆ†é¡µçš„æ“ä½œï¼Œé¿å…è‡ªå·±å†éº»çƒ¦åœ°å»å†™åˆ†é¡µçš„ä»£ç (åœ¨componentæ¨¡å—é‡Œ)ï¼š

```xml
<!-- MyBatis åˆ†é¡µæ’ä»¶ -->
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper</artifactId>
    <version>4.0.0</version>
</dependency>
```

#### â‘¡**åç«¯ä»£ç **

1ã€åœ¨**Spring-persist-mybatis**é…ç½®æ–‡ä»¶ä¸­åŠ å…¥MyBatisæ’ä»¶â€”PageHelper

```xml
<bean class="org.mybatis.spring.SqlSessionFactoryBean" id="sqlSessionFactoryBean">
    <property name="configLocation" value="classpath:mybatis/mybatis-config.xml"/>
    <property name="mapperLocations" value="classpath:mybatis/mapper/*.xml"/>
    <property name="dataSource" ref="dataSource"/>
    
    <!--é…ç½®æ’ä»¶-->
    <property name="plugins">
        <array>
            <!--é…ç½®PageHelperï¼Œç”¨äºå¸®åŠ©åˆ†é¡µ-->
            <bean class="com.github.pagehelper.PageHelper">
                <property name="properties">
                    <props>
                       <!--è®¾ç½®æ•°æ®åº“æ–¹è¨€ï¼ˆè¿™é‡Œå°±æ˜¯mysqlï¼‰-->
                        <prop key="dialect">mysql</prop>
                       <!--è®©PageHelperè‡ªåŠ¨å°†æµè§ˆå™¨ä¼ æ¥çš„PageNumä¿®æ­£åˆ°æ­£ç¡®èŒƒå›´(0~æœ€å¤§å€¼)-->
                        <prop key="reasonable">true</prop>
                    </props>
                </property>
            </bean>
        </array>
    </property> 
</bean>
```

2ã€åœ¨**AdminMapper.xml**ç¼–å†™æŸ¥è¯¢Adminä¿¡æ¯çš„SQLè¯­å¥

```xml
<!--é€†å‘å·¥ç¨‹ç”Ÿæˆçš„ï¼Œå¯ä»¥ç”¨äºå¼•å…¥é‡å¤æ•°æ®-->
<sql id="Base_Column_List" >
  id, login_acct, user_pswd, user_name, email, create_time
</sql>
<!--æŸ¥æ‰¾ç¬¦åˆå…³é”®å­—åŒ¹é…çš„æ•°æ®ï¼ˆæ²¡æœ‰å…³é”®å­—åˆ™é»˜è®¤æŸ¥æ‰¾å…¨éƒ¨æ•°æ®ï¼‰-->
  <select id="SelectAdminByKeyword" resultMap="BaseResultMap">
    <!--select id, login_acct, user_pswd, user_name, email, create_time-->
     select
      <!--å¼•å…¥å‰é¢çš„sqlæ ‡ç­¾ä¸­çš„å†…å®¹-->  
    <include refid="Base_Column_List"/>
    from t_admin
    where
        login_acct like concat("%", #{keyword},"%")or
        user_name like concat("%", #{keyword},"%")or
        email like concat("%", #{keyword},"%")
  </select>
  <!--åˆ†é¡µlimit é‚£éƒ¨åˆ†äº¤ç»™PageHelper-->
```

> è¿™ç§æŸ¥æ³•æ€§èƒ½ä¸Šä¸å¤ªä¼˜ç§€ï¼Œä»¥åç”¨ElasticSearchã€‚

â€‹	3ã€åœ¨**AdminMapper**æ¥å£ä¸­ç¼–å†™æŠ½è±¡æ–¹æ³•ï¼š

```java
 //æ ¹æ®å…³é”®å­—æŸ¥æ‰¾ç”¨æˆ·çš„æ–¹æ³•
    List<Admin> SelectAdminByKeyword(String keyword);
```

4ã€åœ¨**Service**å±‚è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå®ç°æŸ¥è¯¢æ“ä½œ

```java
 // æ˜¾ç¤ºåˆ†é¡µ
    PageInfo<Admin> getPageInfo(String keyword, Integer pageNum, Integer pageSize);
```

5ã€**AdminServiceImpl**å…·ä½“å®ç°

```java
 /**
     * @param keyword å…³é”®å­—
     * @param pageNum å½“å‰é¡µç 
     * @param pageSize æ¯ä¸€é¡µæ˜¾ç¤ºçš„é¡µæ•°
     * @return æœ€åçš„pageInfoå¯¹è±¡
     */
    @Override
    public PageInfo<Admin> getPageInfo(String keyword, Integer pageNum, Integer pageSize) {
        // è°ƒç”¨PageHelperçš„é™æ€æ–¹æ³•å¼€å¯åˆ†é¡µåŠŸèƒ½
        //è¿™é‡Œå……åˆ†ä½“ç°äº†â€œéä¾µå…¥å¼â€è®¾è®¡ï¼šåŸæœ¬è¦åšçš„æŸ¥è¯¢ä¸å¿…æœ‰ä»»ä½•çš„ä¿®æ”¹
        PageHelper.startPage(pageNum,pageSize);

        // è°ƒç”¨mapperæ¥å£çš„å¯¹åº”æ–¹æ³•æ‰§è¡ŒæŸ¥è¯¢
        List<Admin> list = adminMapper.SelectAdminByKeyword(keyword);

        // å°è£…åˆ°PageInfoå¯¹è±¡ä¸­
        // è¿”å›å¾—åˆ°çš„pageInfoå¯¹è±¡
        return new PageInfo<>(list);
    }
```

**è¿™é‡Œä½¿ç”¨PageInfoä½œä¸ºè¿”å›å€¼ï¼Œæ˜¯å› ä¸ºPageInfoå¯¹è±¡ä¸­å¯ä»¥æºå¸¦å½“å‰çš„é¡µç ã€æ¯é¡µå¤§å°ã€æ€»é¡µæ•°ç­‰æ•°æ®ï¼Œåœ¨å‰ç«¯å–å€¼æ—¶ï¼Œæ¯”ç›´æ¥è¿”å›ä¸€ä¸ªAdminçš„Listæ›´åŠ æ–¹ä¾¿ã€‚**

â€‹	5ã€ç¼–å†™**Controller**å±‚ä»£ç ï¼š

```java
 // æ˜¾ç¤ºadminåˆ†é¡µæ•°æ®
    @RequestMapping("admin/page/page.html")
    public String getPageInfo(
            // ä¼ å…¥çš„å…³é”®å­—ï¼Œè‹¥æœªä¼ å…¥ï¼Œé»˜è®¤å€¼ä¸ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼ˆä¸èƒ½æ˜¯nullï¼‰
            @RequestParam(value = "keyword", defaultValue = "") String keyword,
            // ä¼ å…¥çš„é¡µç ï¼Œé»˜è®¤å€¼ä¸º1
            @RequestParam(value = "pageNum", defaultValue = "1") Integer pageNum,
            // ä¼ å…¥çš„é¡µé¢å¤§å°ï¼Œé»˜è®¤å€¼ä¸º5
            @RequestParam(value = "pageSize", defaultValue = "5") Integer pageSize,
            // ModelMapç”¨äºç»™å‰ç«¯å¸¦æ•°æ®
            ModelMap modelMap) {
        // ä»AdminServiceä¸­å¾—åˆ°å¯¹åº”ä¼ å‚çš„åˆ—è¡¨
        PageInfo<Admin> pageInfo = adminService.getPageInfo(keyword,pageNum,pageSize);

        // å°†å¾—åˆ°çš„PageInfoå­˜å…¥modelMapï¼Œä¼ ç»™å‰ç«¯
        modelMap.addAttribute(CrowdConstant.NAME_PAGE_INFO,pageInfo);

        //è¿›å…¥å¯¹åº”çš„æ˜¾ç¤ºç®¡ç†å‘˜ä¿¡æ¯çš„é¡µé¢ï¼ˆ/WEB-INF/admin-page.jspï¼‰
        return "admin-page";
    }
```

#### â‘¢å‰ç«¯ä»£ç 

é¡µé¢å¼•å…¥**Pagination**ç¼–å†™é¡µç å¯¼èˆªæ¡å‡½æ•°

```jsp
<%@include file="/WEB-INF/include-head.jsp" %>
<%--å¼•å…¥paginationçš„css--%>
<link href="css/pagination.css" rel="stylesheet" />
<%--å¼•å…¥åŸºäºjqueryçš„paginationjs--%>
<script type="text/javascript" src="jquery/jquery.pagination.js"></script>
<script type="text/javascript">
    $(function () {
        initPagination();
    });

    function initPagination(){
        //è·å–åˆ†é¡µæ•°æ®ä¸­çš„æ€»è®°å½•æ•°
        var totalRecord = ${requestScope.pageInfo.total};

        //å£°æ˜Paginationè®¾ç½®å±æ€§çš„JSONå¯¹è±¡
        var properties = {
            num_edge_entries: 3,                                //è¾¹ç¼˜é¡µæ•°
            num_display_entries: 5,                             //ä¸»ä½“é¡µæ•°
            callback: pageSelectCallback,                       //ç‚¹å‡»å„ç§ç¿»é¡µåæ‰­æ—¶è§¦å‘çš„å›è°ƒå‡½æ•°ï¼ˆæ‰§è¡Œç¿»é¡µæ“ä½œï¼‰
            current_page: ${requestScope.pageInfo.pageNum-1},   //å½“å‰é¡µç 
            prev_text: "ä¸Šä¸€é¡µ",                                 //åœ¨å¯¹åº”ä¸Šä¸€é¡µæ“ä½œçš„æŒ‰é’®ä¸Šçš„æ–‡æœ¬
            next_text: "ä¸‹ä¸€é¡µ",                                 //åœ¨å¯¹åº”ä¸‹ä¸€é¡µæ“ä½œçš„æŒ‰é’®ä¸Šçš„æ–‡æœ¬
            items_per_page: ${requestScope.pageInfo.pageSize}   //æ¯é¡µæ˜¾ç¤ºçš„æ•°é‡
        };

        // ç”Ÿæˆé¡µç å¯¼èˆªæ¡
        $("#Pagination").pagination(totalRecord,properties);
    }

```

**å›è°ƒå‡½æ•°ï¼š**å£°æ˜å‡ºæ¥ä»¥åä¸æ˜¯è‡ªå·±è°ƒç”¨ï¼Œè€Œæ˜¯äº¤ç»™ç³»ç»Ÿæˆ–è€…æ¡†æ¶è°ƒç”¨

```jsp
// æ¥ä¸Š 
// ç”¨æˆ·ç‚¹å‡»é¡µæ•°æˆ–è€…ä¸Šã€ä¸‹ä¸€é¡µçš„æ—¶å€™è°ƒç”¨æ­¤å‡½æ•°å®ç°é¡µé¢è·³è½¬
function pageSelectCallback(pageIndex, jQuery){
        // pageIndexæ˜¯å½“å‰é¡µç çš„ç´¢å¼•ï¼Œå› æ­¤æ¯”pageNumå°1
        var pageNum = pageIndex+1;

        // æ‰§è¡Œé¡µé¢è·³è½¬
        window.location.href = "admin/page/page.html?pageNum="+pageNum+"&keyword=${param.keyword}";

        // å–æ¶ˆå½“å‰è¶…é“¾æ¥çš„é»˜è®¤è¡Œä¸º
        return false;
    }
```

==æ³¨æ„==ï¼šåœ¨**Pagination.js**æºç é‡Œé¢

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220519140825861.png" alt="image-20220519140825861" style="zoom:67%;" />

**åŸå› **ï¼š<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220519141459145.png" alt="image-20220519141459145" style="zoom:50%;" />

> ==**å¾…è§£å†³**ï¼š==
>
> â‘ æŒ‰é¡µæ•°è·³è½¬é¡µé¢åˆ·æ–°çš„é—®é¢˜    â‘¡å–æ¶ˆè¶…é“¾æ¥çš„é»˜è®¤è¡Œä¸ºï¼ˆè§„èŒƒçš„æ–¹æ³•ï¼‰

ç¿»é¡µæ—¶ä¿æŒkeyword å€¼ï¼š

`window.location.href = "admin/page/page.html?pageNum="+pageNum+"&keyword=${param.keyword}";`

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220519155730322.png" alt="image-20220519155730322" style="zoom: 67%;" />



### 2ï¼‰ã€æ ¹æ®å…³é”®å­—æŸ¥è¯¢

æ‰¾åˆ°é¡µé¢ä¸­æ‰§è¡ŒæŸ¥è¯¢æ“ä½œçš„éƒ¨åˆ†ï¼Œä¿®æ”¹ä»£ç æˆå¦‚ä¸‹ï¼š

â€‹		ä¸»è¦è®¾ç½®äº†è¯¥formè¡¨å•çš„**action**ã€**method**ã€è¾“å…¥æ¡†çš„**name**ã€è¾“å…¥æ¡†çš„**value**

```jsp
<form class="form-inline" action="admin/page/page.html" method="post" role="form" style="float:left;">
    <div class="form-group has-feedback">
        <div class="input-group">
            <div class="input-group-addon">æŸ¥è¯¢æ¡ä»¶</div>
            <input class="form-control has-success" name="keyword" type="text" placeholder="è¯·è¾“å…¥æŸ¥è¯¢æ¡ä»¶" value="${param.keyword}"/>
        </div>
    </div>
    <button type="submit" class="btn btn-warning"><i class="glyphicon glyphicon-search"></i> æŸ¥è¯¢
    </button>
</form>
```

**action**æŒ‡å‘**controller**å±‚çš„æŸ¥è¯¢çš„æ–¹æ³•ï¼Œä¸”åœ¨è¡¨å•ä¸­ï¼Œé™„å¸¦äº† **name="keyword"** çš„æ•°æ®ï¼Œä¹Ÿå°±å°†keywordå¸¦ç»™äº†åç«¯ï¼Œåç«¯é€šè¿‡**@RequestParamæ¥æ”¶keyword**ï¼Œä¼ é€’ç»™**service**å±‚ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ç­‰ç­‰åç»­æ“ä½œã€‚

â€‹	ä¸”åœ¨åˆ†é¡µæ˜¾ç¤ºé¡µé¢ä»£ç ä¸­ï¼Œé€šè¿‡**å›è°ƒå‡½æ•°**çš„è·³è½¬é“¾æ¥ä¸­ç”¨**Elè¡¨è¾¾å¼**ç»™keywordä¼ å€¼ï¼š

`EL è¡¨è¾¾å¼ä¸­çš„param ä¹Ÿæ˜¯ä¸€ä¸ªéšå«å¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥è·å–è¯·æ±‚å‚æ•°ï¼`

`window.location.href = "admin/page/page.html?pageNum="+pageNum+"&keyword=${param.keyword}";`

å¯ä»¥ä½¿åœ¨ä½¿ç”¨æ¢é¡µæ“ä½œæ—¶ï¼Œä»ç„¶å¸¦ç€å…³é”®è¯æ¢é¡µï¼ˆè¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå› ä¸ºæœ‰æ—¶å€™keywordå¹¶æ²¡æœ‰ï¼Œå› æ­¤keywordä¼ å€¼**å¿…é¡»æ”¾åœ¨é“¾æ¥çš„æœ€åä¸€ä¸ªä½ç½®**ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·é”™è¯¯ï¼š**å¦‚==keyword=&pageNum=2==è¿™æ ·çš„urlæ˜¯æœ‰é—®é¢˜çš„ï¼‰**



### 3ï¼‰ã€åˆ é™¤å•æ¡æ•°æ®

#### â‘ å‰ç«¯ä»£ç 

```jsp
// åˆ é™¤æŒ‰é’®
<!--${}RESTé£æ ¼ï¼Œç”¨@PathVariableæ¥æ”¶-->
<a href="admin/page/remove/${admin.id}/${requestScope.pageInfo.pageNum}/${param.keyword}.html" class="btn btn-danger btn-xs">
    <i class=" glyphicon glyphicon-remove"></i>
</a>
```

#### â‘¡åç«¯ä»£ç 

**Controllerå±‚ï¼š**

```java
  @RequestMapping("/admin/page/remove/{adminId}/{pageNum}/{keyword}.html")
    public String removeAdmin(
            // ä»å‰ç«¯è·å–çš„ç®¡ç†å‘˜id
            @PathVariable("adminId") Integer adminId,
            // ä»å‰ç«¯è·å–çš„å½“å‰é¡µç ä¸å…³é”®å­—ï¼ˆä¸ºäº†åˆ é™¤åè·³è½¬çš„é¡µé¢ä»ç„¶æ˜¯åˆšæ‰çš„é¡µé¢ï¼Œä¼˜åŒ–ä½“éªŒï¼‰
            @PathVariable("pageNum") Integer pageNum,
            @PathVariable("keyword") String keyword){
        
        // è°ƒç”¨serviceå±‚æ–¹æ³•ï¼Œä»æ•°æ®åº“æ ¹æ®idåˆ é™¤ç®¡ç†å‘˜
        adminService.removeById(adminId);
        
        // é¡µé¢è·³è½¬ï¼šå›åˆ°åˆ†é¡µé¡µé¢
		// å°è¯•æ–¹æ¡ˆ 1ï¼šç›´æ¥è½¬å‘åˆ° admin page.jspä¼šæ— æ³•æ˜¾ç¤ºåˆ†é¡µæ•°æ®
		// return "admin page";
        
		// å°è¯•æ–¹æ¡ˆ 2ï¼šè½¬å‘åˆ° /admin/get/page.htmlåœ°å€ï¼Œä¸€æ—¦åˆ·æ–°é¡µé¢ä¼šé‡å¤æ‰§è¡Œåˆ é™¤æµªè´¹æ€§èƒ½
		// return "forward:/admin/get/page.html";
        
        // å°è¯•æ–¹æ¡ˆ 3ï¼šé‡å®šå‘åˆ° /admin/get/page.htmlï¼ˆå‡å°‘æ•°æ®åº“æ“ä½œï¼‰,è¿”å›ä¿¡æ¯é¡µ
        // åŒæ—¶ä¸ºäº†ä¿æŒåŸæœ¬æ‰€åœ¨çš„é¡µé¢å’ŒæŸ¥è¯¢å…³é”®è¯å†é™„åŠ  pageNumå’Œ keywordä¸¤ä¸ªè¯·æ±‚å‚æ•°
        // å¦‚æœç”¨è¯·æ±‚è½¬å‘ï¼ˆforwardï¼‰çš„è¯ä¼šå†æ¬¡æ‰§è¡Œsqlæ“ä½œ
        return "redirect:/admin/page/page.html?pageNum="+pageNum+"&keyword="+keyword;
    }
```

`@PathVariable("keyword") String keyword`,è‹¥æ˜¯keywordç±»å‹ä¸º**Integer**ä¼šæŠ¥é”™ï¼Œå› ä¸ºIntegeræ˜¯å¯¹è±¡ï¼ˆObjectç±»å‹ï¼‰çš„ï¼Œä¸å…è®¸**å¯¹è±¡ä¸ºç©º**ï¼Œè€Œ**Stringç±»**çš„valueæ˜¯ä¸€ä¸ª**å­—ç¬¦æ•°ç»„**ã€‚



**Serviceå±‚**ï¼š

ï¼ˆè¿™é‡Œå…¶å®éœ€è¦åšä¸€äº›åˆ¤æ–­ï¼šå¦‚ä¸èƒ½åˆ é™¤ç°åœ¨ç™»å½•çš„ç®¡ç†å‘˜è´¦å·ç­‰ï¼Œä½†æ˜¯è¿™é‡Œä»…ä»…æ˜¯ä½œä¸ºç»ƒä¹ ï¼Œæ­¤å¤„å°±ä¸å†™äº†ï¼›å¦å¤–ï¼Œåœ¨æ­£å¼çš„é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¸ä¼šå°†æ•°æ®åº“ä¸­çš„ä¿¡æ¯å®Œå…¨æŠ¹å»ï¼Œå› ä¸ºæŠ¹å»åæ¢å¤å°±å¾ˆéš¾äº†ï¼Œä¸€èˆ¬å¯ä»¥åœ¨è¡¨ä¸­è®¾ç½®ä¸€ä¸ªçŠ¶æ€ç ï¼Œå¦‚1è¡¨ç¤ºç”¨æˆ·å¯ç”¨ï¼Œ0è¡¨ç¤ºä¸å¯ç”¨ï¼Œä¹Ÿå°±ä»£è¡¨è¢«åˆ é™¤äº†ã€é€»è¾‘åˆ é™¤ã€‘ï¼‰

```java
// æ ¹æ®idåˆ é™¤ç®¡ç†å‘˜
@Override
public void removeById(Integer adminId) {
    // Mapperæ¥å£çš„æ–¹æ³•ï¼Œæ ¹æ®ä¸»é”®idåˆ é™¤ç®¡ç†å‘˜
    adminMapper.deleteByPrimaryKey(adminId);
}
```



### 4)ã€æ–°å¢

**ç›®æ ‡ï¼š**åˆ›å»ºæ–°çš„ç®¡ç†å‘˜ä¿¡æ¯ï¼Œé€šè¿‡è¡¨å•æäº¤ç»™åç«¯ç¨‹åºå¹¶ä¿å­˜åˆ°æ•°æ®åº“ã€‚

**æ€è·¯ï¼š**<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220519162448598.png" alt="image-20220519162448598" style="zoom:67%;" />



#### 	â‘ æ•°æ®åº“æ“ä½œ

â€‹		æ•°æ®åº“ä¸­ç»™loginAcctè®¾ç½®å”¯ä¸€çº¦æŸï¼ˆé˜²æ­¢æ·»åŠ ç®¡ç†å‘˜æ—¶ä½¿ç”¨é‡å¤çš„ç™»å½•è´¦å·ï¼‰

```sql
ALTER TABLE t_admin ADD UNIQUE INDEX(login_acct)
```

â€‹		è¿™é‡Œåˆ¤æ–­login_acctæ˜¯å¦å”¯ä¸€æœ€å¥½æ˜¯æ”¾åœ¨æ•°æ®åº“ä¸­åˆ¤æ–­ï¼Œå¦‚æœç®€å•åœ°æ”¾åç«¯ä»£ç ä¸­åˆ¤æ–­ï¼Œå¯èƒ½ä¼šå‡ºç°åŒæ—¶æ·»åŠ åŒä¸€ä¸ªlogin_acctæ“ä½œï¼ˆ**åŒå**ï¼‰ï¼Œç”±äºä»£ç æ‰§è¡Œå‰åçš„åŸå› å¯¼è‡´æœ€åå†™å…¥äº†ä¸€æ ·çš„login_acctï¼Œè€Œé€šè¿‡æ•°æ®åº“è®¾ç½®**å”¯ä¸€çº¦æŸ**ï¼Œåˆ™å¯ä»¥ä»æ ¹æœ¬é¿å…å‡ºç°é‡å¤æ•°æ®ã€‚

#### 	â‘¡å‰ç«¯ä»£ç ï¼š

â€‹	æ–°å¢æŒ‰é’®ä¿®æ”¹æˆå¦‚ä¸‹ï¼š

==æ­¤è·¯å¾„ä¸º`mvc:view-controller`é‡Œé¢é…ç½®è¦è·³è½¬çš„è·¯å¾„==

```jsp
<a href="admin/to/add/page.html" class="btn btn-primary" style="float:right;">
    <i class="glyphicon glyphicon-plus">æ–°å¢</i></a>
```

â€‹	å› ä¸ºè¯¥è·³è½¬ä¸éœ€è¦æºå¸¦æ•°æ®ç­‰æ“ä½œï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨**view-controller**æ¥è·³è½¬

```xml
<!--å‰å¾€æ³¨å†Œadminé¡µé¢-->
<mvc:view-controller path="/admin/to/add/page.html" view-name="admin-add"/>
```

â€‹	**admin-add.jsp**é¡µé¢ä»£ç ï¼ˆä¸»è¦çœ‹æ·»åŠ æ•°æ®çš„**è¡¨å•**çš„è·¯å¾„ï¼Œå³**Controlleræ‹¦æˆªå¤„ç†çš„è·¯å¾„**ï¼‰ï¼š

â€‹	ä¸»è¦åšäº†**name**å±æ€§ã€**action**ã€**method**çš„ä¿®æ”¹ï¼Œä¿®æ”¹ä¸ºä¸**Adminå®ä½“ç±»å¯¹è±¡å¯¹åº”çš„æ¨¡å¼**

```jsp
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <ol class="breadcrumb">
        <li><a href="admin/main/page.html">é¦–é¡µ</a></li>
        <li><a href="admin/page/page.html">æ•°æ®åˆ—è¡¨</a></li>
        <li class="active">æ–°å¢</li>
    </ol>
    <div class="panel panel-default">
        <div class="panel-heading">è¡¨å•æ•°æ®<div style="float:right;cursor:pointer;" data-toggle="modal" data-target="#myModal"><i class="glyphicon glyphicon-question-sign"></i></div></div>
        <div class="panel-body">
            
            <form action="admin/page/save.html" method="post" role="form">
                
                <p>${requestScope.exception.message}</p>
                <div class="form-group">
                    <label for="exampleInputPassword1">ç™»å½•è´¦å·</label>
                    <input type="text" name="loginAcct" class="form-control" id="exampleInputPassword1" placeholder="è¯·è¾“å…¥ç™»å½•è´¦å·">
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">ç”¨æˆ·å¯†ç </label>
                    <input type="text" name="userPswd" class="form-control" id="exampleInputPassword1" placeholder="è¯·è¾“å…¥ç”¨æˆ·å¯†ç ">
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">ç”¨æˆ·æ˜µç§°</label>
                    <input type="text" name="userName" class="form-control" id="exampleInputPassword1" placeholder="è¯·è¾“å…¥ç”¨æˆ·æ˜µç§°">
                </div>

                <div class="form-group">
                    <label for="exampleInputEmail1">é‚®ç®±åœ°å€</label>
                    <input type="email" name="email" class="form-control" id="exampleInputEmail1" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€">
                    <p class="help-block label label-warning">è¯·è¾“å…¥åˆæ³•çš„é‚®ç®±åœ°å€, æ ¼å¼ä¸ºï¼š xxxx@xxxx.com</p>
                </div>
                <button type="submit" class="btn btn-success"><i class="glyphicon glyphicon-plus"></i> æ–°å¢</button>
                <button type="reset" class="btn btn-danger"><i class="glyphicon glyphicon-refresh"></i> é‡ç½®</button>
            </form>
        </div>
    </div>
</div>
```

#### 	â‘¢åç«¯ä»£ç 

â€‹		Controllerå±‚ï¼š

```java
// æ–°å¢æ•°æ®
    @RequestMapping("admin/page/Add.html")
    public String addAdmin(Admin admin){
        // è°ƒç”¨serviceå±‚å­˜å‚¨adminå¯¹è±¡çš„æ–¹æ³•
        adminService.saveAdmin(admin);

        // é‡å®šå‘åˆ°åˆ†é¡µçš„é¡µé¢ï¼Œä¸”ä¸ºäº†èƒ½åœ¨æ·»åŠ ç®¡ç†å‘˜åçœ‹åˆ°ç®¡ç†å‘˜ï¼Œè®¾ç½®pageNumä¸ºæ•´å‹çš„æœ€å¤§å€¼ï¼ˆé€šè¿‡ä¿®æ­£åˆ°æœ€åä¸€é¡µï¼‰
        // ä½¿ç”¨é‡å®šå‘æ˜¯ä¸ºäº†é¿å…åˆ·æ–°æµè§ˆå™¨é‡å¤æäº¤è¡¨å•
        return "redirect:/admin/page/page.html?pageNum="+Integer.MAX_VALUE;
    }
```

â€‹		Serviceå±‚ï¼š

```java
   // å­˜å‚¨å¯¹è±¡çš„æ–¹æ³•
    @Override
    public void saveAdmin(Admin admin) {
        // ç”Ÿæˆç³»ç»Ÿæ—¶é—´
        Date date = new Date();

        // æ ¼å¼åŒ–æ—¶é—´
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        String createTime = simpleDateFormat.format(date);

        // è®¾ç½®ç®¡ç†å‘˜åˆ›å»ºæ—¶é—´
        admin.setCreateTime(createTime);

        // å¾—åˆ°å‰ç«¯ä¼ å…¥çš„å¯†ç ï¼ŒåŠ å¯†å¹¶æ”¾å›åŸæœ¬çš„adminå¯¹è±¡
        String source = admin.getUserPswd();
        String userPswd = CrowdUtil.md5(source);
        admin.setUserPswd(userPswd);

        // æ‰§è¡Œæ’å…¥æ“ä½œ
        try {
            adminMapper.insert(admin);
        } catch (Exception e) {
            e.printStackTrace();
            // è¿™é‡Œå‡ºç°å¼‚å¸¸çš„è¯ä¸€èˆ¬å°±æ˜¯DuplicateKeyExceptionï¼ˆå› ä¸ºæ’å…¥çš„loginAcctå·²å­˜åœ¨è€Œè§¦å‘ï¼‰
            if (e instanceof DuplicateKeyException) {
                throw new
                        LoginAcctAlreadyInUseExpection(CrowdConstant.MESSAGE_SYSTEM_ERROR_LOGIN_NOT_UNIQUE);
            }
        }
    }
```

è§£å†³**é‡åå¼‚å¸¸ï¼š**

ç¼–å†™**è‡ªå®šä¹‰å¼‚å¸¸ LoginAcctAlreadyInUseException**ï¼Œä¾ç„¶æ˜¯ç»§æ‰¿äº†RuntimeExceptionï¼Œå› æ­¤ä¸é‡å¤å†™äº†ã€‚

â€‹	å› ä¸ºä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç¼–å†™**å¼‚å¸¸å¤„ç†ç±»**ï¼š

```java
  // æ–°å¢ç®¡ç†å‘˜æ—¶ï¼Œè‹¥login_acctå·²å­˜åœ¨ï¼Œåˆ™è¿”å›admin-add.jspé¡µé¢ï¼Œé™„å¸¦å¼‚å¸¸ä¿¡æ¯
    @ExceptionHandler(value = LoginAcctAlreadyInUseException.class)
    public ModelAndView resolverLoginAcctAlreadyInUseException(
            LoginAcctAlreadyInUseException exception, HttpServletRequest request,
            HttpServletResponse response) throws IOException {
        String viewName = "admin-add";
        return commonCode(exception,request,response,viewName);
    }
```

å‰ç«¯æ˜¾ç¤ºå¼‚å¸¸ä¿¡æ¯ï¼š

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220520002122865.png" alt="image-20220520002122865" style="zoom: 50%;" />

æ˜¾ç¤ºæ•ˆæœï¼š

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220520003818458.png" alt="image-20220520003818458" style="zoom: 33%;" />



### 5ï¼‰ã€æ›´æ–°

**ç›®æ ‡**ï¼šä¿®æ”¹ç°æœ‰Adminçš„æ•°æ®ï¼Œä¸ä¿®æ”¹å¯†ç å’Œåˆ›å»ºæ—¶é—´

**æ€è·¯**ï¼š

<img src="https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220520145112229.png" alt="image-20220520145112229" style="zoom:50%;" />

**ä»£ç **ï¼š

#### â‘ å‰ç«¯ä»£ç 

**admin-pageä¸­çš„ğŸ–ŠæŒ‰é’®**

```jsp
 <a href="admin/page/update/${admin.id}/${requestScope.pageInfo.pageNum}/${param.keyword}.html" class="btn btn-primary btn-xs"><i class=" glyphicon glyphicon-pencil"></i></a>
```

**è·³è½¬åˆ°editä¿®æ”¹ç•Œé¢ï¼ˆ==é€šè¿‡15è¡Œçš„éšè—åŸŸå°†å€¼å¸¦ç»™åç«¯å¤„ç†==ï¼Œ==21è¡Œvalueå›æ˜¾æ•°æ®==ï¼‰**

```jsp
 <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <ol class="breadcrumb">
                <li><a href="admin/main/page.html">é¦–é¡µ</a></li>
                <li><a href="admin/page/page.html">æ•°æ®åˆ—è¡¨</a></li>
                <li class="active">æ›´æ–°</li>
            </ol>
            <div class="panel panel-default">
                <div class="panel-heading">è¡¨å•æ•°æ®
                    <div style="float:right;cursor:pointer;" data-toggle="modal" data-target="#myModal"><i class="glyphicon glyphicon-question-sign"></i></div>
                </div>
                <div class="panel-body">
                    <form action="admin/update.html" method="post" role="form">
                        <p>${requestScope.exception.message}</p>
                        <%-- type=hiddenï¼Œå› ä¸ºè¿™äº›æ•°æ®ä¸éœ€è¦æ˜¾ç¤ºï¼ˆpageNumã€keywordï¼‰æˆ–ä¸åº”è¯¥è¢«ä¿®æ”¹ï¼ˆidã€createTimeï¼‰ --%>
                        <input type="hidden" name="id" value="${requestScope.admin.id}"/>
                        <input type="hidden" name="createTime" value="${requestScope.admin.createTime}"/>
                        <input type="hidden" name="pageNum" value="${requestScope.pageNum}"/>
                        <input type="hidden" name="keyword" value="${requestScope.keyword}"/>
                        <div class="form-group">
                            <label for="exampleInputPassword1">ç™»å½•è´¦å·</label>
                            <%-- é€šè¿‡valueç»™å„ä¸ªæ–‡æœ¬æ¡†èµ‹åŸå§‹å€¼ --%>
                            <input type="text" name="loginAcct" class="form-control" id="exampleInputPassword1" value="${requestScope.admin.loginAcct}" placeholder="è¯·è¾“å…¥ç™»å½•è´¦å·">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">ç”¨æˆ·æ˜µç§°</label>
                            <input type="text" name="userName" class="form-control" id="exampleInputPassword1" value="${requestScope.admin.userName}" placeholder="è¯·è¾“å…¥ç”¨æˆ·æ˜µç§°">
                        </div>

                        <div class="form-group">
                            <label for="exampleInputEmail1">é‚®ç®±åœ°å€</label>
                            <input type="email" name="email" class="form-control" id="exampleInputEmail1" value="${requestScope.admin.email}" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€">
                            <p class="help-block label label-warning">è¯·è¾“å…¥åˆæ³•çš„é‚®ç®±åœ°å€, æ ¼å¼ä¸ºï¼š xxxx@xxxx.com</p>
                        </div>
                        <button type="submit" class="btn btn-success"><i class="glyphicon glyphicon-edit">ä¿®æ”¹</i> </button>
                        <button type="reset" class="btn btn-danger"><i class="glyphicon glyphicon-refresh">é‡ç½®</i> </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
```



#### â‘¡åç«¯ä»£ç 

**è·³è½¬åˆ°ä¿®æ”¹ç•Œé¢ï¼ˆ==ä¸ºäº†å›æ˜¾æ•°æ®ï¼Œè¿™é‡Œ"admin"å¯¹åº”å‰ç«¯ä¸­çš„"requestScope.admin"==ï¼‰**

**controllerå±‚**

```java
// æºå¸¦æ•°æ®è·³è½¬åˆ°ä¿®æ”¹ç•Œé¢
    @RequestMapping("admin/to/edit/page.html")
    public String toEditPage(
            @PathVariable("adminId")Integer adminId,
            // pageNumã€keywordå¯ä»¥ä¸ç”¨åœ¨æ­¤è·å–ï¼Œå†™åœ¨è¡¨å•éšè—åŸŸä¸­
            ModelMap modelMap){
        // 1.æ ¹æ® idï¼ˆä¸»é”®ï¼‰æŸ¥è¯¢å¾…æ›´æ–°çš„ Adminå¯¹è±¡
        Admin admin = adminService.queryAdmin(adminId);
        // 2.å°† Adminå¯¹è±¡å­˜å…¥æ¨¡å‹
        modelMap.addAttribute("admin", admin);
        return "admin-edit";
    }
```

**serviceImplå®ç°**

```java
 @Override
    public Admin queryAdmin(Integer adminId) {
        return adminMapper.selectByPrimaryKey(adminId);
    }
```

**ç‚¹å‡»ä¿®æ”¹åçš„é€»è¾‘ï¼š**

**Controllerå±‚**

```java
// ç‚¹å‡»â€œä¿®æ”¹â€æŒ‰é’®ä¿å­˜ä¿¡æ¯
    @RequestMapping("admin/update.html")
    public String update(
            Admin admin,
            @RequestParam("pageNum") Integer pageNum,
            @RequestParam("keyword") String keyword){
        // è°ƒç”¨Serviceæ–¹æ³•ï¼Œæ›´æ–°adminçš„ä¿¡æ¯
        adminService.updateAdmin(admin);

       // é‡å®šå‘åˆ†é¡µç•Œé¢
        return "redirect:/admin/page/page.html?pageNum="+pageNum+"&keyword="+keyword;
    }
```

**serviceImplå®ç°(æ³¨æ„ï¼š Selectiveï¼šè¡¨ç¤ºæœ‰é€‰æ‹©çš„æ›´æ–°ï¼Œå¯¹äºnullå€¼çš„å­—æ®µä¸æ›´æ–°)**

```java
// æ›´æ–°adminçš„ä¿¡æ¯
@Override
public void updateAdmin(Admin admin) {
    // Selectiveï¼šè¡¨ç¤ºæœ‰é€‰æ‹©çš„æ›´æ–°ï¼Œå¯¹äºnullå€¼çš„å­—æ®µä¸æ›´æ–°
    try {
        adminMapper.updateByPrimaryKeySelective(admin);
    } catch (Exception e) {
        e.printStackTrace();
        logger.info("å¼‚å¸¸å…¨ç±»å=" + e.getClass().getName());
        // è¿™é‡Œå‡ºç°å¼‚å¸¸çš„è¯ä¸€èˆ¬å°±æ˜¯DuplicateKeyExceptionï¼ˆå› ä¸ºæ’å…¥çš„loginAcctå·²å­˜åœ¨è€Œè§¦å‘ï¼‰
        if (e instanceof DuplicateKeyException) {
            // å¦‚æœç¡®å®æ˜¯DuplicateKeyExceptionï¼Œæ­¤æ—¶æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„å¼‚å¸¸
            throw new
                    LoginAcctAlreadyInUseForUpdateException(CrowdConstant.MESSAGE_SYSTEM_ERROR_ACCT_NOT_UNIQUE);
        }
        // ä¸ºäº†ä¸æ©ç›–é—®é¢˜ï¼Œå¦‚æœå½“å‰æ•è·åˆ°çš„ä¸æ˜¯DuplicateKeyException ç±»å‹çš„å¼‚å¸¸ï¼Œåˆ™æŠŠå½“å‰æ•è·åˆ°çš„å¼‚å¸¸å¯¹è±¡ç»§ç»­å‘ä¸ŠæŠ›å‡º
        throw e;
    }
}
```

**å¼‚å¸¸å¤„ç†ç±»**

ï¼ˆæ–°å»º**LoginAcctAlreadyInUseForUpdateException**å¼‚å¸¸ç±»æ˜¯ä¸ºäº†ä¸ä¹‹å‰çš„**æ·»åŠ **åŒºåˆ†ï¼‰

```java
// æ›´æ–°æ—¶ï¼Œä¸åº”å°†è´¦å·æ”¹ä¸ºä¸å…¶ä»–è´¦å·åŒå
@ExceptionHandler(value = LoginAcctAlreadyInUseForUpdateException.class)
public ModelAndView resolverLoginAcctAlreadyInUseForUpdateException(
        LoginAcctAlreadyInUseForUpdateException exception, HttpServletRequest request,
        HttpServletResponse response) throws IOException {
    // æ­¤æ—¶è¿›å…¥çš„æ˜¯system-error.jspçš„é¡µé¢
    String viewName = "admin-edit";
    return commonCode(exception,request,response,viewName);
}
```

> **é—®é¢˜**ï¼šæ²¡æœ‰æºå¸¦èƒ½å¤Ÿå›æ˜¾çš„è¡¨å•æ•°æ®





# å‘

## ==â‘ == ç»„ä»¶æœªè£…é…

<font color = red>ä½çº§é”™è¯¯ï¼ï¼ï¼</font>

![image-20220515180124304](https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220515180124304.png)

æ²¡æœ‰å†™@Controlleræ³¨è§£è£…é…åˆ°iocå®¹å™¨é‡Œé¢ï¼Œå¯¼è‡´ä¸€ç›´æŠ¥404é”™è¯¯ï¼ï¼ï¼

## â‘¡urlé—®é¢˜

![image-20220515180241244](https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220515180241244.png)

è·³è½¬çš„urlå³è¦è¢«æ‹¦æˆªçš„urlï¼Œè¦å’Œcontrolleræ–¹æ³•é‡Œé¢çš„ä¸€è‡´ï¼Œåˆ«å†™é”™ã€‚



## ==â‘¢==æ‰¾ä¸åˆ°é™æ€èµ„æºçš„é—®é¢˜

```
No mapping found for HTTP request with URI [/crowdfunding02_admin_webui_war/
```

- å‡ºç°è¿™ä¸ªé”™è¯¯è€ƒè™‘å…ˆå»é…ç½®é™æ€èµ„æºè¿‡æ»¤

åŸå› æ˜¯web.xmlæ–‡ä»¶ä¸­,Springçš„DispatcherServletå¯¹urlçš„é…ç½®ä¸åˆç†

å…¶ä¸­ <servlet-mapping>çš„<url-pattern>/</url-pattern>
æŠŠæ‰€æœ‰çš„è¯·æ±‚éƒ½äº¤ç»™Springå»å¤„ç†äº†,è€Œæ‰€æœ‰å¯ç”¨çš„è¯·æ±‚urléƒ½æ˜¯åœ¨Constrolleré‡Œä½¿ç”¨ç±»ä¼¼@RequestMapping(value = "/login/{user}", method = RequestMethod.GET)è¿™æ ·çš„æ³¨è§£é…ç½®çš„,è¿™æ ·å½“æˆ‘ä»¬å¯¹html/js/css/jpg/gifç­‰é™æ€èµ„æºè®¿é—®æ—¶å°±ä¼šè¯·æ±‚ä¸åˆ°ã€‚

**è§£å†³æ–¹æ³•ä¹‹ä¸€ï¼š**åœ¨springæ•´åˆmvcçš„é…ç½®æ–‡ä»¶é‡Œé¢åŠ ä¸Š `<mvc:default-servlet-handler/>`



é¡¹ç›®ä¸­å‡ºç°é—®é¢˜çš„åŸå› ï¼š

![image-20220515233710531](https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220515233710531.png)

åŠ ä¸Šå‰é¢é…ç½®çš„==base==æ ‡ç­¾ï¼Œæ‰èƒ½å°†æ‰“åŒ…æ–‡ä»¶é‡Œçš„å„ç§èµ„æºå¼•ç”¨åˆ°



## â‘£æ— æ³•è¯†åˆ«jstlè¡¨è¾¾å¼é—®é¢˜

![image-20220518174551718](https://raw.githubusercontent.com/xj-070/MarkDown/project/myproject/crowdfunding/image-20220518174551718.png)

è§£å†³æ–¹å¼ï¼šæ‰¾åˆ°`standard.jar`,è§£å‹åå°†å…¶ä¸­çš„**META-INF**æ”¾åœ¨é¡¹ç›®çš„**webç›®å½•ä¸‹**æˆ–è€…æ”¾åœ¨**Tomcat9çš„lib**ç›®å½•ä¸‹



## â‘¤requestScope

requestScopeè¡¨åä¸€ä¸ªhttpè¯·æ±‚çš„æ•´ä¸ª[ç”Ÿå‘½å‘¨æœŸ]ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå®šä¹‰è€Œå·²ï¼Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

**é€šè¿‡model.addAttribute()æˆ–è€…request.setAttribute()**å°†å‚æ•°ç­‰æ·»åŠ åˆ°è¯·æ±‚åŸŸä¸­

${requestScope.info}å°±ç­‰ä»·äºrequest.getAttribute("info");

request.getAttribute() è¿™ä¸ªæ–¹æ³•å¯ä»¥å–å‡ºæŒ‡å®šåç§°çš„è¿™ä¸ªå±æ€§çš„å€¼ã€‚

request.getParameter() è¿™ä¸ªæ–¹æ³•å¯ä»¥è·å¾—å®¢æˆ·ç«¯æäº¤åˆ°æœåŠ¡å™¨çš„å‚æ•°ã€‚



**model.addAttribute() ä¸ session.setAttribute()åŒºåˆ«ï¼š**

ä¸»è¦åŒºåˆ«åœ¨äº**æ¨¡å‹æ˜¯æŒ‰è¯·æ±‚**çš„ï¼Œè€Œ**ä¼šè¯æ˜¯æŒ‰Httpä¼šè¯**çš„ã€‚è¿™æ„å‘³ç€æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæœ‰ä¸€ä¸ªæ–°çš„æ¨¡å‹ã€‚ä¸€ä¸ªæ¨¡å‹å°†åœ¨å¤„ç†ä¸€ä¸ªè¯·æ±‚åè¢«é”€æ¯ï¼Œå¹¶ä¸ºä¸‹ä¸€ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ¨¡å‹ã€‚

å› æ­¤ï¼Œå¦‚æœæ‚¨å¸Œæœ›åç»­è¯·æ±‚å¯ä»¥è®¿é—®æ‚¨åœ¨åŒä¸€ä¼šè¯ä¸­çš„å…ˆå‰è¯·æ±‚ä¸­è®¾ç½®çš„å€¼ï¼Œåˆ™å¿…é¡»å°†å…¶æ·»åŠ åˆ°ä¼šè¯ä¸­ï¼Œè€Œä¸æ˜¯æ¨¡å‹ä¸­ã€‚



## â‘¥@PathVariable å’Œ @RequestParam

@PathVariable å’Œ @RequestParaméƒ½èƒ½å¤Ÿå®Œæˆç±»ä¼¼çš„åŠŸèƒ½â€”â€”å› ä¸ºæœ¬è´¨ä¸Šï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨æˆ·çš„è¾“å…¥ï¼Œåªä¸è¿‡è¾“å…¥çš„éƒ¨åˆ†ä¸åŒï¼Œä¸€ä¸ªåœ¨**URLè·¯å¾„**éƒ¨åˆ†ï¼Œå¦ä¸€ä¸ªåœ¨**å‚æ•°**éƒ¨åˆ†



## â‘¦è§£å†³Tomcatæ§åˆ¶å°ä¸­æ–‡ä¹±ç é—®é¢˜

ä¿®æ”¹tomcatçš„confæ–‡ä»¶å¤¹ä¸­çš„**logging.properties**ï¼š

==å…¨éƒ¨ä¿®æ”¹æˆUTF-8==

å°†**ideaçš„æ§åˆ¶å°ç¼–ç **è®¾ç½®æˆ**UTF-8**
